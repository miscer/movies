# Movie search

This is a simple Vue.js app for searching and filtering a database of movies. Each movie has a title, description, release date, poster image URL, genres and actors. These are all shown to the user, who can search by movie title, or filter by genres and movie period.

## User interface

I am not a designer, so the interface has a very minimalistic design. Movies are shown in a grid with three columns, and details for each movie are shown when the user hovers over each movie. This is not the best solution for showing movie details, as there is no hint to the user that they can use the mouse to reveal them. Also, hovering is not very compatible with touch screens. However, I think for this demo it works well.

Movie filters are next to the grid. In the beginning I used text and select inputs for all three filters, but I ended up with a more user-friendly approach. Since people usually think about movie periods ("90s movies are my favourite") rather than exact years, I used a list of decades for the release date filter. For genres, the user can select multiple options and the app will show movies that match at least one selected option. This again reflects how people think ("I would like to see either a comedy or sci-fi").

When filters are changed, there is a 500 ms delay between actually re-loading the movie list. This is to avoid excessive requests when the user is typing in the movie title. The app will wait until the user has finished typing, and then load the movies.

## API 

There are two API endpoints. The first one is for fetching all available genres. It simply returns a list of genres, each with an ID and a title. This endpoint is used to show the genre filter.

The second one returns movies in the database. Movies can be filtered by adding query parameters:

* Title, by adding `title=abc` to the query. This will match any part of the title, case-insensitive.
* Genres, by adding one or more `genre=2` to the query. Movies that have at least one of the specified genres will be returned in the response.
* Release date, by adding `from` and/or `to` to the query. The value is a date string, and the API will select only movies released between the specified dates.

Complete actor and genre objects are included for each movie, to make data loading easier. However, this can be inefficient if there are large numbers of genres or actors for each movie. This could be solved by returning only the actor and genre IDs, and letting the client load these in separate requests. 

Finally, one thing missing is pagination. If there are tens of thousands movies in the database we cannot load them all at once. As a next step I would add cursor-based pagination, where the client could add `last-id` and `limit` to the query and the response would contain `limit` number of movies that follow the movie with ID in `last-id`.

### Mock API

I've used the [msw](https://mswjs.io/) library to create a mock API. The library works by installing a service worker, which intercepts requests to the API and returns mock responses. This has the added benefit of being able to use the mock API for unit tests as well. All requests and responses are logged into the console by the library, and since they are regular network requests they also show up in the network tab in developer tools.

The API implementation is in `src/mock-api/handlers.js`, with the setup for browser and node.js in `src/mock-api/browser.js` and `src/mock-api/test.js`.

Data for the API is randomly generated by `src/mock-api/data/generate.js` and stored in the `data.json` file.

## Project setup
```
yarn install
```

### Compile and hot-reload for development
```
yarn serve
```

### Compile and minify for production
```
yarn build
```

### Run unit tests
```
yarn test:unit
```

### Lint and fix files
```
yarn lint
```
